var ColTs;!function(a){var b=function(){function a(){}return a.maxBy=function(a,b){for(var c=null,d=null,e=0;e<a.length;e++){var f=b(a[e]);(null==c||f>c)&&(c=f,d=a[e])}return d},a.each=function(a,b){for(var c=0;c<a.length;c++)b(a[c],c)},a.count=function(a,b){for(var c=0,d=0;d<a.length;d++)b(a[d])&&c++;return c},a.select=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=b(a[d],d);c[d]=e}return c},a.intersect=function(a,b){for(var c=[],d=0;d<a.length;d++)for(var e=0;e<b.length;e++)if(a[d]==b[e]){c.push(a[d]);break}return c},a.where=function(a,b){for(var c=[],d=0;d<a.length;d++)b(a[d])&&c.push(a[d]);return c},a.any=function(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return!0;return!1},a.distinct=function(a,b){for(var c={},d=[],e=0;e<a.length;e++){var f=a[e],g=b(f);g in c||(c[b(f)]=!0,d.push(f))}return d},a.aggregate=function(a,b,c){for(var d=b,e=0;e<a.length;e++)d=c(a[e],d);return d},a.sort=function(a,b){var c=a.slice(0);return c.sort(b)},a.shuffle=function(a){for(var b,c,d=a.slice(0),e=d.length;e;)c=Math.floor(Math.random()*e--),b=d[e],d[e]=d[c],d[c]=b;return d},a}();a.ColHelper=b}(ColTs||(ColTs={})),"undefined"!=typeof exports&&(exports.ColHelper=ColTs.ColHelper);var ColTs;!function(a){var b=function(){function b(a){this.source=null,this.source=a}return b.prototype.all=function(a){for(var b=0;b<this.source.length;b++)if(!a(this.source[b]))return!1;return!0},b.prototype.average=function(a){return this.sum(a)/this.source.length},b.prototype.intersect=function(c){return b.of(a.ColHelper.intersect(this.source,c.toArray()))},b.prototype.randomize=function(){return b.of(a.ColHelper.shuffle(this.source))},b.prototype.last=function(a,b){for(var c=this.source.length-1;c>=0;c--)if(a(this.source[c]))return this.source[c];return b},b.prototype.clone=function(){return b.of(this.source.slice(0))},b.prototype.normalize=function(a,b,c,d){if(void 0===c&&(c=0),void 0===d&&(d=1),0!=this.length()){var e=a(this.minBy(a)),f=a(this.maxBy(a));this.each(function(g){var h=a(g),i=f>e?(h-e)/(f-e):d-c/2;b(g,i)})}},b.of=function(a){return new b(a)},b.empty=function(){return new b([])},b.prototype.unique=function(){var a={};return new b(this.source.filter(function(b){var c=""+b;return a.hasOwnProperty(c)?!1:a[c]=!0}))},b.prototype.length=function(){return this.source.length},b.prototype.getItem=function(a){return this.source[a]},b.prototype.each=function(b){a.ColHelper.each(this.source,b)},b.prototype.toArray=function(){return this.source},b.prototype.count=function(b){return a.ColHelper.count(this.source,b)},b.prototype.select=function(c){return b.of(a.ColHelper.select(this.source,c))},b.prototype.where=function(c){return b.of(a.ColHelper.where(this.source,c))},b.prototype.orderBy=function(c){return b.of(a.ColHelper.sort(this.source,function(a,b){return c(a)-c(b)}))},b.prototype.orderByDesc=function(c){return b.of(a.ColHelper.sort(this.source,function(a,b){return c(b)-c(a)}))},b.prototype.skip=function(a){if(a>=this.source.length)return b.empty();var c=this.source.slice(a);return b.of(c)},b.prototype.take=function(a){var c=0>a?this.source.slice(a):this.source.slice(0,a);return b.of(c)},b.prototype.first=function(a,b){void 0===b&&(b=null);for(var c=0;c<this.source.length;c++)if(a(this.source[c]))return this.source[c];return b},b.prototype.contains=function(b){return a.ColHelper.any(this.source,b)},b.prototype.unionCol=function(a){var c=this.source.concat(a.source);return b.of(c)},b.prototype.union=function(a){var c=this.source.concat(a);return b.of(c)},b.prototype.distinct=function(c){return b.of(a.ColHelper.distinct(this.source,c))},b.prototype.maxBy=function(b){return a.ColHelper.maxBy(this.source,b)},b.prototype.minBy=function(a){return this.maxBy(function(b){return-a(b)})},b.prototype.sum=function(b){return a.ColHelper.aggregate(this.source,0,function(a,c){return c+b(a)})},b.prototype.groupBy=function(b){return a.MapHelper.orderedGroupByString(this.source,b)},b.prototype.selectMany=function(a){var c=[];return this.each(function(b){return c=c.concat(a(b))}),b.of(c)},b.prototype.selectFirst=function(a,b){for(var c=0;c<this.source.length;c++){var d=a(this.source[c]);if(b(d))return d}return null},b.prototype.reverse=function(){return b.of(this.source.reverse())},b.prototype.toMap=function(b,c){var d=this.select(function(a){return{key:b(a),value:c(a)}});return new a.Map(d.toArray())},b}();a.Col=b}(ColTs||(ColTs={})),"undefined"!=typeof exports&&(exports.Col=ColTs.Col);var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ColTs;!function(a){var b=function(b){function c(a){b.call(this,a)}return __extends(c,b),c.ofHash=function(b){return new c(a.MapHelper.toKeyedArray(b))},c.ofUrlString=function(b){return a.MapHelper.ofHashString(b,"&","=",function(a){return decodeURIComponent(a)})},c.emptyColMap=function(){return c.ofHash({})},c.prototype.get=function(a){var b=this.first(function(b){return b.key==a});return b?b.value:null},c.prototype.containsKey=function(a){var b=this.first(function(b){return b.key==a});return!!b},c.prototype.keys=function(){return this.select(function(a){return a.key})},c.prototype.values=function(){return this.select(function(a){return a.value})},c.prototype.selectValues=function(a){var b=this.select(function(b){return{key:b.key,value:a(b)}});return new c(b.toArray())},c}(a.Col);a.Map=b}(ColTs||(ColTs={})),"undefined"!=typeof exports&&(exports.Map=ColTs.Map);var ColTs;!function(a){var b=function(){function b(){}return b.toKeyedArray=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push({key:c,value:a[c]});return b},b.ofHashString=function(b,c,d,e){var f=a.Col.of(b.split(c)),g=f.select(function(a){var b=a.split(d),c=b[0],f=b[1],g=e(f);return{key:c,value:g}}).toArray();return new a.Map(g)},b.orderedGroupByString=function(b,c){for(var d={},e=[],f=0;f<b.length;f++){var g=b[f],h=c(g);h in d||(e.push({key:h,value:[]}),d[h]=e.length-1);var i=d[h];e[i].value.push(g)}return new a.Map(e)},b}();a.MapHelper=b}(ColTs||(ColTs={})),"undefined"!=typeof exports&&(exports.MapHelper=ColTs.MapHelper);